-- backup the original reg_persons overlapping set of records
CREATE TABLE tmp_reg_person AS (select id, ROW_NUMBER () OVER (ORDER BY id) + 1020000 as new_id, created_by_id from reg_person where id > 290000 AND id<420000);

-- drop foreign key constraints to allow adding ON UPDATE CASCADE to the constraints
alter table reg_person drop constraint reg_person_created_by_id_6077a86828bf2974_fk_auth_user_id;
alter table admin_preferences drop constraint admin_preferences_person_id_689fe9061199a11c_fk_reg_person_id;
alter table auth_user drop constraint auth_user_reg_person_id_a5c91cbe2cfbe65_fk_reg_person_id;
alter table bursary_application drop constraint bursary_application_person_id_4c643f1194f4968b_fk_reg_person_id;
alter table core_adverse_conditions drop constraint core_ad_beneficiary_person_id_719b6d857636a1d9_fk_reg_person_id;
alter table core_encounters drop constraint core_en_beneficiary_person_id_6dadc9ce770a4bd8_fk_reg_person_id;
alter table core_encounters drop constraint core_enco_workforce_person_id_18b7bb16f8b0ac5f_fk_reg_person_id;
alter table core_services drop constraint core_se_beneficiary_person_id_383154ff7012dd9c_fk_reg_person_id;
alter table core_services drop constraint core_serv_workforce_person_id_5c9799b62e38af0d_fk_reg_person_id;
alter table form_encounters_notes drop constraint form_en_beneficiary_person_id_52a064c132511b1b_fk_reg_person_id;
alter table form_encounters_notes drop constraint form_enco_workforce_person_id_160ca7f29db3b0ea_fk_reg_person_id;
alter table forms_log drop constraint forms_log_person_id_4d43cca03f06ebdc_fk_reg_person_id;
alter table ovc_adverseevents_followup drop constraint ovc_adverseevents_f_person_id_38ffec45328c45f8_fk_reg_person_id;
alter table ovc_bursaryinfo drop constraint ovc_bursaryinfo_person_id_24a67f6766cb6eab_fk_reg_person_id;
alter table ovc_care_benchmark_score drop constraint ovc_care_benchma_care_giver_id_6017344255d02a8_fk_reg_person_id;
alter table ovc_care_case_plan drop constraint ovc_care_case_pl_caregiver_id_1ee7e0545a5238b6_fk_reg_person_id;
alter table ovc_care_case_plan drop constraint ovc_care_case_plan_person_id_35e8639f96c6589c_fk_reg_person_id;
alter table ovc_care_cpara drop constraint ovc_care_cpara_caregiver_id_b181fc46b50fd19_fk_reg_person_id;
alter table ovc_care_cpara drop constraint ovc_care_cpara_person_id_9887f1a7042ed75_fk_reg_person_id;
alter table ovc_care_education drop constraint ovc_care_education_person_id_7b69631d0229b4f4_fk_reg_person_id;
alter table ovc_care_events drop constraint ovc_care_events_person_id_6d442eb1c3b9c142_fk_reg_person_id;
alter table ovc_care_health drop constraint ovc_care_health_person_id_4293271cb2a0e0df_fk_reg_person_id;
alter table ovc_care_well_being drop constraint ovc_care_well_being_person_id_1e6956af61107ceb_fk_reg_person_id;
alter table ovc_case_category drop constraint ovc_case_category_person_id_72b28b31a90e4fa2_fk_reg_person_id;
alter table ovc_case_geo drop constraint ovc_case_geo_person_id_1c8c3a8b3c4ee878_fk_reg_person_id;
alter table ovc_case_record drop constraint ovc_case_record_person_id_7bc0d1eac95f2ef5_fk_reg_person_id;
alter table ovc_case_sub_category drop constraint ovc_case_sub_catego_person_id_52c6e163218d6b87_fk_reg_person_id;
alter table ovc_checkin drop constraint ovc_checkin_person_id_341e1a55b34574a6_fk_reg_person_id;
alter table ovc_cp_referrals drop constraint ovc_cp_referrals_person_id_7af48c8301898b80_fk_reg_person_id;
alter table ovc_discharge_followup drop constraint ovc_discharge_follo_person_id_1844c333f0423373_fk_reg_person_id;
alter table ovc_documents drop constraint ovc_documents_person_id_43c30508c4e53725_fk_reg_person_id;
alter table ovc_economic_status drop constraint ovc_economic_status_person_id_2f5514e02e797ea1_fk_reg_person_id;
alter table ovc_education_followup drop constraint ovc_education_follo_person_id_6a38a5e6b4ed20f7_fk_reg_person_id;
alter table ovc_eligibility drop constraint ovc_eligibility_person_id_6908bf22989cd96c_fk_reg_person_id;
alter table ovc_exit_organization drop constraint ovc_exit_organizati_person_id_5619af938536da2f_fk_reg_person_id;
alter table ovc_family_care drop constraint ovc_family_care_person_id_6eef598575511953_fk_reg_person_id;
alter table ovc_family_status drop constraint ovc_family_status_person_id_550812c9207e58e0_fk_reg_person_id;
alter table ovc_friends drop constraint ovc_friends_person_id_1a1f2255943839dc_fk_reg_person_id;
alter table ovc_goals drop constraint ovc_goals_person_id_15a9a56b4fe82b0d_fk_reg_person_id;
alter table ovc_hiv_management drop constraint ovc_hiv_management_person_id_157920aeb1dea20b_fk_reg_person_id;
alter table ovc_hiv_status drop constraint ovc_hiv_status_person_id_589ee89d38cad0d2_fk_reg_person_id;
alter table ovc_hobbies drop constraint ovc_hobbies_person_id_859d920b8b14375_fk_reg_person_id;
alter table ovc_household drop constraint ovc_household_head_person_id_1440e92f0a7fd77e_fk_reg_person_id;
alter table ovc_household_members drop constraint ovc_household_membe_person_id_7493ff94f22e2c92_fk_reg_person_id;
alter table ovc_medical drop constraint ovc_medical_person_id_1c5056f9f1bdbde2_fk_reg_person_id;
alter table ovc_medical_subconditions drop constraint ovc_medical_subcond_person_id_7e7e9de3345354ed_fk_reg_person_id;
alter table ovc_needs drop constraint ovc_needs_person_id_13004a3a52dc2d1e_fk_reg_person_id;
alter table ovc_placement_followup drop constraint ovc_placement_follo_person_id_5ae5f9b064803fb8_fk_reg_person_id;
alter table ovc_placement drop constraint ovc_placement_person_id_159230ec5394f1e8_fk_reg_person_id;
alter table ovc_referrals drop constraint ovc_referrals_person_id_7ce20b4c9c16e525_fk_reg_person_id;
alter table ovc_registration drop constraint ovc_registration_caretaker_id_2908b38dd1f395f3_fk_reg_person_id;
alter table ovc_registration drop constraint ovc_registration_child_chv_id_c7ffc9f00f349a7_fk_reg_person_id;
alter table ovc_registration drop constraint ovc_registration_person_id_19a6a5e799d240a7_fk_reg_person_id;
alter table ovc_reminders drop constraint ovc_reminders_person_id_5da099351d67126c_fk_reg_person_id;
alter table ovc_risk_screening drop constraint ovc_risk_screening_person_id_316c400b9d865700_fk_reg_person_id;
alter table ovc_sibling drop constraint ovc_sibling_cpims_id_44ff50e1378a42c7_fk_reg_person_id;
alter table ovc_sibling drop constraint ovc_sibling_person_id_38e6a8c83483e7e1_fk_reg_person_id;
alter table ovc_viral_load drop constraint ovc_viral_load_person_id_47040e77d2e3be57_fk_reg_person_id;
alter table reg_persons_audit_trail drop constraint reg__person_recorded_paper_id_6618b9f482cad177_fk_reg_person_id;
alter table reg_household drop constraint reg_household_index_child_id_57d96e3174d773bb_fk_reg_person_id;
alter table reg_persons_guardians drop constraint reg_person_guardian_person_id_2103bfec8094b41f_fk_reg_person_id;
alter table reg_person_master drop constraint reg_person_master_person_id_33b09634671fa083_fk_reg_person_id;
alter table reg_persons_audit_trail drop constraint reg_persons_audit_tr_person_id_8b2e1b0255f7814_fk_reg_person_id;
alter table reg_persons_beneficiary_ids drop constraint reg_persons_benefic_person_id_17a7c488d7a55f20_fk_reg_person_id;
alter table reg_persons_contact drop constraint reg_persons_contact_person_id_19cb690e5dd2f0a8_fk_reg_person_id;
alter table reg_persons_external_ids drop constraint reg_persons_externa_person_id_2d583597d1877ba9_fk_reg_person_id;
alter table reg_persons_guardians drop constraint reg_persons_g_child_person_id_1225eefe2e3874e9_fk_reg_person_id;
alter table reg_persons_geo drop constraint reg_persons_geo_person_id_5892eb569d0a5d47_fk_reg_person_id;
alter table reg_persons_org_units drop constraint reg_persons_org_uni_person_id_6ad12ece1a7c07f8_fk_reg_person_id;
alter table reg_persons_siblings drop constraint reg_persons_s_child_person_id_5556b3f51aa1f8a9_fk_reg_person_id;
alter table reg_persons_siblings drop constraint reg_persons_sibling_person_id_475bc7dab77bcad9_fk_reg_person_id;
alter table reg_persons_types drop constraint reg_persons_types_person_id_269c36756a51e8e3_fk_reg_person_id;
alter table reg_persons_workforce_ids drop constraint reg_persons_workfor_person_id_7ec87d703ae015f9_fk_reg_person_id;
alter table reg_persons_audit_trail drop constraint reg_persons_audit__app_user_id_3b2a1e563d3e4ba8_fk_auth_user;
alter table reg_persons_geo drop constraint reg_persons_geo_area_id_587ea5af96b5b6a9_fk_list_geo_area_id;
alter table reg_persons_org_units drop constraint reg_persons_org_org_unit_id_66ff71213e4cd546_fk_reg_org_unit_id;
alter table admin_preferences add constraint admin_preferences_person_id_689fe9061199a11c_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table auth_user add constraint auth_user_reg_person_id_a5c91cbe2cfbe65_fk_reg_person_id FOREIGN KEY (reg_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table bursary_application add constraint bursary_application_person_id_4c643f1194f4968b_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table core_adverse_conditions add constraint core_ad_beneficiary_person_id_719b6d857636a1d9_fk_reg_person_id FOREIGN KEY (beneficiary_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table core_encounters add constraint core_en_beneficiary_person_id_6dadc9ce770a4bd8_fk_reg_person_id FOREIGN KEY (beneficiary_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table core_encounters add constraint core_enco_workforce_person_id_18b7bb16f8b0ac5f_fk_reg_person_id FOREIGN KEY (workforce_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table core_services add constraint core_se_beneficiary_person_id_383154ff7012dd9c_fk_reg_person_id FOREIGN KEY (beneficiary_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table core_services add constraint core_serv_workforce_person_id_5c9799b62e38af0d_fk_reg_person_id FOREIGN KEY (workforce_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table form_encounters_notes add constraint form_en_beneficiary_person_id_52a064c132511b1b_fk_reg_person_id FOREIGN KEY (beneficiary_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table form_encounters_notes add constraint form_enco_workforce_person_id_160ca7f29db3b0ea_fk_reg_person_id FOREIGN KEY (workforce_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table forms_log add constraint forms_log_person_id_4d43cca03f06ebdc_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_adverseevents_followup add constraint ovc_adverseevents_f_person_id_38ffec45328c45f8_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_bursaryinfo add constraint ovc_bursaryinfo_person_id_24a67f6766cb6eab_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_benchmark_score add constraint ovc_care_benchma_care_giver_id_6017344255d02a8_fk_reg_person_id FOREIGN KEY (care_giver_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_case_plan add constraint ovc_care_case_pl_caregiver_id_1ee7e0545a5238b6_fk_reg_person_id FOREIGN KEY (caregiver_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_case_plan add constraint ovc_care_case_plan_person_id_35e8639f96c6589c_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_cpara add constraint ovc_care_cpara_caregiver_id_b181fc46b50fd19_fk_reg_person_id FOREIGN KEY (caregiver_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_cpara add constraint ovc_care_cpara_person_id_9887f1a7042ed75_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_education add constraint ovc_care_education_person_id_7b69631d0229b4f4_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_events add constraint ovc_care_events_person_id_6d442eb1c3b9c142_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_health add constraint ovc_care_health_person_id_4293271cb2a0e0df_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_care_well_being add constraint ovc_care_well_being_person_id_1e6956af61107ceb_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_case_category add constraint ovc_case_category_person_id_72b28b31a90e4fa2_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_case_geo add constraint ovc_case_geo_person_id_1c8c3a8b3c4ee878_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_case_record add constraint ovc_case_record_person_id_7bc0d1eac95f2ef5_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_case_sub_category add constraint ovc_case_sub_catego_person_id_52c6e163218d6b87_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_checkin add constraint ovc_checkin_person_id_341e1a55b34574a6_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_cp_referrals add constraint ovc_cp_referrals_person_id_7af48c8301898b80_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_discharge_followup add constraint ovc_discharge_follo_person_id_1844c333f0423373_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_documents add constraint ovc_documents_person_id_43c30508c4e53725_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_economic_status add constraint ovc_economic_status_person_id_2f5514e02e797ea1_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_education_followup add constraint ovc_education_follo_person_id_6a38a5e6b4ed20f7_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_eligibility add constraint ovc_eligibility_person_id_6908bf22989cd96c_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_exit_organization add constraint ovc_exit_organizati_person_id_5619af938536da2f_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_family_care add constraint ovc_family_care_person_id_6eef598575511953_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_family_status add constraint ovc_family_status_person_id_550812c9207e58e0_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_friends add constraint ovc_friends_person_id_1a1f2255943839dc_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_goals add constraint ovc_goals_person_id_15a9a56b4fe82b0d_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_hiv_status add constraint ovc_hiv_status_person_id_589ee89d38cad0d2_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_hobbies add constraint ovc_hobbies_person_id_859d920b8b14375_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_household add constraint ovc_household_head_person_id_1440e92f0a7fd77e_fk_reg_person_id FOREIGN KEY (head_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_household_members add constraint ovc_household_membe_person_id_7493ff94f22e2c92_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_medical add constraint ovc_medical_person_id_1c5056f9f1bdbde2_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_medical_subconditions add constraint ovc_medical_subcond_person_id_7e7e9de3345354ed_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_needs add constraint ovc_needs_person_id_13004a3a52dc2d1e_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_placement_followup add constraint ovc_placement_follo_person_id_5ae5f9b064803fb8_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_placement add constraint ovc_placement_person_id_159230ec5394f1e8_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_referrals add constraint ovc_referrals_person_id_7ce20b4c9c16e525_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_registration add constraint ovc_registration_caretaker_id_2908b38dd1f395f3_fk_reg_person_id FOREIGN KEY (caretaker_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_registration add constraint ovc_registration_child_chv_id_c7ffc9f00f349a7_fk_reg_person_id FOREIGN KEY (child_chv_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_registration add constraint ovc_registration_person_id_19a6a5e799d240a7_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_reminders add constraint ovc_reminders_person_id_5da099351d67126c_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_sibling add constraint ovc_sibling_cpims_id_44ff50e1378a42c7_fk_reg_person_id FOREIGN KEY (cpims_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_sibling add constraint ovc_sibling_person_id_38e6a8c83483e7e1_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_viral_load add constraint ovc_viral_load_person_id_47040e77d2e3be57_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_audit_trail add constraint reg__person_recorded_paper_id_6618b9f482cad177_fk_reg_person_id FOREIGN KEY (person_recorded_paper_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_household add constraint reg_household_index_child_id_57d96e3174d773bb_fk_reg_person_id FOREIGN KEY (index_child_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_person add constraint reg_person_created_by_id_6077a86828bf2974_fk_auth_user_id FOREIGN KEY (created_by_id) REFERENCES auth_user(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_guardians add constraint reg_person_guardian_person_id_2103bfec8094b41f_fk_reg_person_id FOREIGN KEY (guardian_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_person_master add constraint reg_person_master_person_id_33b09634671fa083_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_audit_trail add constraint reg_persons_audit_tr_person_id_8b2e1b0255f7814_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_beneficiary_ids add constraint reg_persons_benefic_person_id_17a7c488d7a55f20_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_contact add constraint reg_persons_contact_person_id_19cb690e5dd2f0a8_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_external_ids add constraint reg_persons_externa_person_id_2d583597d1877ba9_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_guardians add constraint reg_persons_g_child_person_id_1225eefe2e3874e9_fk_reg_person_id FOREIGN KEY (child_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_geo add constraint reg_persons_geo_person_id_5892eb569d0a5d47_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_org_units add constraint reg_persons_org_uni_person_id_6ad12ece1a7c07f8_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_siblings add constraint reg_persons_s_child_person_id_5556b3f51aa1f8a9_fk_reg_person_id FOREIGN KEY (child_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_siblings add constraint reg_persons_sibling_person_id_475bc7dab77bcad9_fk_reg_person_id FOREIGN KEY (sibling_person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_types add constraint reg_persons_types_person_id_269c36756a51e8e3_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_workforce_ids add constraint reg_persons_workfor_person_id_7ec87d703ae015f9_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_hiv_management add constraint ovc_hiv_management_person_id_157920aeb1dea20b_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table ovc_risk_screening add constraint ovc_risk_screening_person_id_316c400b9d865700_fk_reg_person_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_audit_trail add constraint reg_persons_audit__app_user_id_3b2a1e563d3e4ba8_fk_auth_user FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_geo add constraint reg_persons_geo_area_id_587ea5af96b5b6a9_fk_list_geo_area_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;
alter table reg_persons_org_units add constraint reg_persons_org_org_unit_id_66ff71213e4cd546_fk_reg_org_unit_id FOREIGN KEY (person_id) REFERENCES reg_person(id) ON UPDATE CASCADE ON DELETE CASCADE;

-- reset the ids to the new ids created in temp
UPDATE reg_person SET id=tmp_reg_person.new_id FROM tmp_reg_person WHERE reg_person.id=tmp_reg_person.id;

DELETE FROM reg_person WHERE id < 400000 AND id > 1 CASCADE;